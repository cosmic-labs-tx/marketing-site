---
import { Icon } from "astro-icon/components";
import Button from "~/components/common/Button.astro";
import Container from "~/components/common/Container.astro";
import Section from "~/components/common/Section.astro";
import { addons, pricingTiers } from "~/constants";
import { cn } from "~/lib/utils";
---

<Section id="pricing" class="bg-primary text-white">
  <Container class="flex flex-col items-center justify-between gap-12">
    <div class="mx-auto space-y-6 text-center">
      <h2 class="text-lg font-medium tracking-wide text-accent-light">PRICING</h2>
      <p class="mx-auto max-w-md text-2xl font-medium sm:text-4xl">Prices That Make Sense For Small Businesses</p>
    </div>

    <div class="isolate mx-auto mt-10 grid grid-cols-1 gap-8 lg:grid-cols-3">
      {
        pricingTiers.map((t) => (
          <div class={cn(t.mostPopular ? "bg-white/5 ring-2 ring-accent" : "ring-1 ring-white/10", "rounded-3xl p-8")}>
            <div class="flex items-center justify-between gap-x-4">
              <h3 id={t.id} class="text-lg font-bold leading-8 text-white">
                {t.name}
              </h3>
              {t.mostPopular && (
                <p class="rounded-full bg-accent px-2.5 py-1 text-xs font-bold leading-5 text-white">Most popular</p>
              )}
            </div>
            <p class="mt-4 text-sm leading-6 text-gray-300">{t.description}</p>
            <p class="mt-6 text-4xl font-bold tracking-tight text-white">{t.price}</p>
            <Button
              as="a"
              style={t.mostPopular ? "accent" : "outline"}
              href={t.href}
              aria-describedby={t.id}
              class={cn(t.mostPopular ? "shadow-sm" : "bg-white/10 text-white hover:bg-white/20", "mt-6 block")}
            >
              Book a Call
            </Button>
            <ul class="mt-8 space-y-3 leading-6 text-gray-300 xl:mt-10">
              {t.features.map((feature) => (
                <li class="flex gap-x-3">
                  <Icon name="tabler:check" class="h-6 w-5 flex-none text-white" aria-hidden="true" />
                  {feature}
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>

    <div>
      <p class="text-center text-lg font-medium tracking-wide text-accent-light">ADDONS</p>
      <div class="isolate mx-auto mt-10 grid grid-cols-1 gap-8 sm:grid-cols-2">
        {
          addons.map((a) => (
            <div class="flex flex-col justify-between rounded-3xl p-8 ring-1 ring-white/10">
              <h3 id={a.id} class="text-lg font-medium text-white">
                {a.name}
              </h3>
              <p class="mt-1 text-sm text-gray-300">{a.description}</p>
              <p class="mt-4 flex items-center gap-1 text-lg font-medium tracking-tight text-accent-light">
                <Icon name="tabler:plus" />
                {a.price}
              </p>
            </div>
          ))
        }
      </div>
    </div>

    <p class="text-lg font-normal">Just need some help with your existing site? We have a flat fee of $75/hr.</p>
  </Container>
</Section>
